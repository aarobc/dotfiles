#!/bin/bash -xe


pip install dotbot
CONFIG="install.conf.yaml"
#
BASEDIR="$(cd "$(dirname "${BASH_SOURCE[0]}")" && pwd)"

cd "${BASEDIR}"
git clone https://github.com/vivien/i3blocks-contrib ~/.config/i3blocks || \
        echo "already cloned i3blocks"

git clone --depth 1 https://github.com/wbthomason/packer.nvim\
 ~/.local/share/nvim/site/pack/packer/start/packer.nvim  || \
        echo "already cloned packer"

git submodule update --init --recursive ~/dotfiles/zgen
git submodule update --init --recursive ~/dotfiles/vim/bundle/Vundle.vim

git submodule foreach -q --recursive 'branch="$(git config -f ~/dotfiles/.gitmodules submodule.$name.branch)"; git checkout $branch master; git pull'


dotbot -d "${BASEDIR}" -c "${CONFIG}" "${@}"

# install vundle
vim +PluginInstall +qall
vim +PluginClean +qall
vim +PackerInstall +qall

#configuring the fonts
# fc-cache -vf ~/.fonts
